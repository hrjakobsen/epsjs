<!DOCTYPE html>
<html>
  <head> </head>
  <style>
    canvas {
      border: 1px solid red;
    }
  </style>
  <body>
    <canvas id="canvas" height="300" width="300"></canvas>
    <textarea id="text" style="height: 300px; width: 600px">
150 280 moveto
(Write PostScript over there ->) show

/radius { 200 } def

1 0.5 0.4 setrgbcolor
newpath
radius 0 moveto
0 0 radius 0 90 arc
fill</textarea>
    <div id="error"></div>
    <script type="module">
      import { PostScriptInterpreter } from './src/index.js'

      const textbox = document.getElementById('text')

      function render() {
        try {
          document.getElementById('error').innerText = ''
          const canvas =document.getElementById('canvas')
          canvas.width = canvas.width
          const context = canvas.getContext('2d')
          PostScriptInterpreter.evaluateString(textbox.value, context)
        } catch (e) {
          document.getElementById('error').innerText = e.message +'\n' + e.stack
        }
      }

      textbox.addEventListener('input', render)
      render()
    </script>
  </body>
</html>
